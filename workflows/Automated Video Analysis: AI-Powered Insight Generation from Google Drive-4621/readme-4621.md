Automated Video Analysis: AI-Powered Insight Generation from Google Drive

https://n8nworkflows.xyz/workflows/automated-video-analysis--ai-powered-insight-generation-from-google-drive-4621


# Automated Video Analysis: AI-Powered Insight Generation from Google Drive

---

### 1. Workflow Overview

This workflow automates the process of downloading a video file from Google Drive, verifying its upload status on the Google Gemini API platform, and performing an AI-powered content analysis of the video. The final output is a structured summary generated by the AI based on the video content. It is designed for users who want to leverage AI capabilities to extract insights from video files stored in Google Drive, enabling periodic automated video analysis.

Logical blocks:

- **1.1 Schedule Trigger:** Initiates the workflow automatically at configured intervals.
- **1.2 Video Download:** Retrieves the video file from Google Drive.
- **1.3 AI Processing Chain:** Orchestrates the AI interaction, including status verification and content analysis via Google Gemini.
- **1.4 Result Formatting:** Structures and prepares the AI analysis output for downstream use or reporting.
- **1.5 Auxiliary:** Sticky notes for documentation and assistance.

---

### 2. Block-by-Block Analysis

#### 1.1 Schedule Trigger

- **Overview:**  
  This block triggers the entire workflow based on a recurring schedule, enabling automated periodic execution without manual intervention.

- **Nodes Involved:**  
  - Schedule Trigger

- **Node Details:**

  - **Schedule Trigger**  
    - *Type & Role:* Trigger node that fires the workflow on a defined interval.  
    - *Configuration:* Default interval set to run the workflow periodically (e.g., daily). The rule is an empty interval array, which should be configured by the user for desired frequency.  
    - *Inputs:* None (trigger node).  
    - *Outputs:* Connects to "Download Video from Drive" node to start the video processing chain.  
    - *Edge Cases:* Misconfiguration of interval may cause the workflow not to trigger or trigger too frequently.  
    - *Sticky Note:* "Set execution interval (e.g., daily)" (Sticky Note1).

#### 1.2 Video Download

- **Overview:**  
  Downloads the target video file from Google Drive using OAuth2 authentication, providing the raw video data to the downstream nodes.

- **Nodes Involved:**  
  - Download Video from Drive

- **Node Details:**

  - **Download Video from Drive**  
    - *Type & Role:* Google Drive node for downloading files.  
    - *Configuration:*  
      - Operation set to "download".  
      - File ID is expected to be defined dynamically or manually via expressions (currently empty, needs to be set).  
      - OAuth2 authentication configured via "Google Drive account 2" credentials.  
    - *Inputs:* Triggered by Schedule Trigger.  
    - *Outputs:* Connects to "Basic LLM Chain" node.  
    - *Version-Specific:* Uses version 1 of Google Drive node.  
    - *Edge Cases:*  
      - Invalid or missing file ID leads to failure.  
      - OAuth token expiration or permission issues cause auth errors.  
      - Network timeouts can interrupt download.  
    - *Sticky Note:* "Pulls video using Google Drive node" (Sticky Note2).

#### 1.3 AI Processing Chain

- **Overview:**  
  This block manages the AI-based analysis. It first checks the file status on the Gemini API, then performs content analysis, and finally runs a Langchain LLM prompt for further processing. It integrates Google Gemini AI services for video content evaluation.

- **Nodes Involved:**  
  - Basic LLM Chain  
  - Check File Status  
  - Analyze Video  
  - Google Gemini Chat Model (used as AI language model backend)

- **Node Details:**

  - **Basic LLM Chain**  
    - *Type & Role:* LangChain LLM chain node, acts as a prompt preprocessor and orchestrator.  
    - *Configuration:*  
      - Prompt text: "Hi, could you please prepare the video below:\n" (likely designed to set context for AI).  
      - Prompt type: "define".  
    - *Inputs:* Receives video binary from "Download Video from Drive".  
    - *Outputs:* Connects to "Check File Status".  
    - *Edge Cases:*  
      - Improper prompt setup or empty video input may reduce AI response quality.  
      - Version 1.5 of LangChain node used, ensure compatibility.  
    - *Sticky Note:* "Prepares and passes input to Gemini" (Sticky Note3).

  - **Check File Status**  
    - *Type & Role:* HTTP Request node to verify the video file status on Google Gemini API endpoint.  
    - *Configuration:*  
      - Method: GET (default).  
      - URL: `"https://generativelanguage.googleapis.com/v1beta/files/your_file_id"` (static placeholder—needs dynamic file ID injection).  
      - Authentication: Predefined credential type (likely API key or OAuth).  
    - *Inputs:* From "Basic LLM Chain".  
    - *Outputs:* Connects to "Analyze Video".  
    - *Edge Cases:*  
      - Invalid or expired credentials cause auth errors.  
      - Hardcoded file_id leads to incorrect status queries.  
      - Network failures or API rate limiting.  
    - *Sticky Note:* "Validates video is uploaded to Gemini endpoint" (Sticky Note4).

  - **Analyze Video**  
    - *Type & Role:* HTTP Request node sending a POST request to Google Gemini API to analyze video content.  
    - *Configuration:*  
      - Method: POST.  
      - URL: `"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent"`.  
      - Body (JSON): Sends payload with the file URI and a prompt requesting video analysis summary.  
      - Uses JSON parameters input.  
    - *Inputs:* From "Check File Status".  
    - *Outputs:* Connects to "Format Analysis Result".  
    - *Edge Cases:*  
      - API failures, invalid file references, or request timeouts.  
      - Authorization errors if API key expired.  
    - *Sticky Note:* "Uses Gemini API to analyze video content" (Sticky Note5).

  - **Google Gemini Chat Model**  
    - *Type & Role:* LangChain Google Gemini chat model node configured as the AI language model backend.  
    - *Configuration:*  
      - Uses Google Palm API credentials.  
    - *Inputs:* Connected as AI language model for the "Basic LLM Chain".  
    - *Outputs:* None directly; facilitates LLM chain response generation.  
    - *Edge Cases:*  
      - Credential expiration or API quota limits.  
      - Version 1 of the node used; check compatibility.  

#### 1.4 Result Formatting

- **Overview:**  
  Finalizes the output by structuring the analysis results into a defined format, making the data easier to consume or export.

- **Nodes Involved:**  
  - Format Analysis Result

- **Node Details:**

  - **Format Analysis Result**  
    - *Type & Role:* Set node used to manipulate and format the AI analysis output.  
    - *Configuration:* Currently empty options, implying no transformation is explicitly defined but placeholder for formatting logic.  
    - *Inputs:* From "Analyze Video".  
    - *Outputs:* None (end of chain).  
    - *Edge Cases:*  
      - Lack of formatting can lead to unstructured or raw output data.  
    - *Sticky Note:* "Structures the summary output" (Sticky Note6).

#### 1.5 Auxiliary - Documentation and Assistance

- **Overview:**  
  Provides helpful notes and contact information for workflow users and maintainers.

- **Nodes Involved:**  
  - Sticky Note  
  - Sticky Note - Assistance  
  - Sticky Note1 to Sticky Note6 (as referenced above)

- **Node Details:**

  - **Sticky Note - Assistance**  
    - Contains contact info for support and links to further resources (YouTube, LinkedIn).  
    - Positioned for easy reference to users needing help.  

  - Other Sticky Notes provide contextual tips near their respective functional nodes, improving usability and maintainability.

---

### 3. Summary Table

| Node Name                | Node Type                      | Functional Role                   | Input Node(s)                 | Output Node(s)                 | Sticky Note                                                                                       |
|--------------------------|--------------------------------|---------------------------------|------------------------------|-------------------------------|--------------------------------------------------------------------------------------------------|
| Schedule Trigger         | scheduleTrigger                | Initiates workflow periodically | None                         | Download Video from Drive      | Set execution interval (e.g., daily)                                                             |
| Download Video from Drive | googleDrive                   | Downloads video from Google Drive | Schedule Trigger             | Basic LLM Chain               | Pulls video using Google Drive node                                                              |
| Basic LLM Chain          | chainLlm (LangChain)           | Prepares and sends prompt to AI  | Download Video from Drive    | Check File Status             | Prepares and passes input to Gemini                                                              |
| Check File Status        | httpRequest                   | Checks video upload status on Gemini | Basic LLM Chain             | Analyze Video                | Validates video is uploaded to Gemini endpoint                                                  |
| Analyze Video            | httpRequest                   | Sends video for AI content analysis | Check File Status            | Format Analysis Result        | Uses Gemini API to analyze video content                                                         |
| Format Analysis Result   | set                           | Formats the AI analysis result    | Analyze Video                | None                        | Structures the summary output                                                                    |
| Google Gemini Chat Model | lmChatGoogleGemini (LangChain) | AI language model backend for LLM | None (used by Basic LLM Chain) | None                        |                                                                                                  |
| Sticky Note             | stickyNote                    | Workflow description             | None                         | None                         | This workflow automates the download, status check, and AI-based analysis of a video file from Google Drive using Gemini API. |
| Sticky Note1            | stickyNote                    | Execution interval note          | None                         | None                         | Set execution interval (e.g., daily)                                                             |
| Sticky Note2            | stickyNote                    | Video download note              | None                         | None                         | Pulls video using Google Drive node                                                              |
| Sticky Note3            | stickyNote                    | Gemini input preparation note    | None                         | None                         | Prepares and passes input to Gemini                                                              |
| Sticky Note4            | stickyNote                    | File status validation note      | None                         | None                         | Validates video is uploaded to Gemini endpoint                                                  |
| Sticky Note5            | stickyNote                    | Gemini video analysis note       | None                         | None                         | Uses Gemini API to analyze video content                                                         |
| Sticky Note6            | stickyNote                    | Output formatting note           | None                         | None                         | Structures the summary output                                                                    |
| Sticky Note - Assistance | stickyNote                    | Support and contact info         | None                         | None                         | For any questions or support, contact Yaron@nofluff.online. Links: YouTube & LinkedIn             |

---

### 4. Reproducing the Workflow from Scratch

1. **Create a new workflow in n8n and name it "Video_analysis".**

2. **Add a Schedule Trigger node:**  
   - Type: scheduleTrigger  
   - Configure the execution interval (e.g., daily at specific time) under the "Rule" section.  
   - No credentials needed.  

3. **Add a Google Drive node to download the video:**  
   - Type: googleDrive  
   - Operation: download  
   - Authentication: OAuth2 using a configured Google Drive OAuth2 credential (e.g., "Google Drive account 2").  
   - File ID: Set dynamically or manually (must be the ID of the video to process).  
   - Connect output of Schedule Trigger to this node.  

4. **Add a LangChain LLM Chain node:**  
   - Type: @n8n/n8n-nodes-langchain.chainLlm  
   - Text prompt: "Hi, could you please prepare the video below:\n"  
   - Prompt Type: define  
   - Connect output of Google Drive node to this node.  
   - Ensure the LangChain node uses the "Google Gemini Chat Model" node as its AI language model backend (set in node parameters).  

5. **Add a Google Gemini Chat Model node:**  
   - Type: @n8n/n8n-nodes-langchain.lmChatGoogleGemini  
   - Credentials: Configure with Google PaLM API credentials.  
   - No direct connections; set as AI model for the LangChain node.  

6. **Add an HTTP Request node to check file status:**  
   - Type: httpRequest  
   - Method: GET (default)  
   - URL: `https://generativelanguage.googleapis.com/v1beta/files/your_file_id` (replace `your_file_id` dynamically with the proper file ID)  
   - Authentication: Use appropriate API authentication (e.g., API key or OAuth).  
   - Connect output of Basic LLM Chain node to this node.  

7. **Add another HTTP Request node to analyze the video:**  
   - Type: httpRequest  
   - Method: POST  
   - URL: `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent`  
   - JSON Parameters: Enabled  
   - Body (JSON):  
     ```json
     {
       "contents": [
         {
           "role": "user",
           "parts": [
             {
               "fileData": {
                 "fileUri": "files/your_file_id"
               }
             },
             {
               "text": "Please analyze the video and provide a summary."
             }
           ]
         }
       ]
     }
     ```  
   - Replace `your_file_id` dynamically with the actual file identifier.  
   - Authentication: Use valid Google API credentials.  
   - Connect output of Check File Status node to this node.  

8. **Add a Set node to format the analysis result:**  
   - Type: set  
   - Parameters: Define any formatting or restructuring needed for the analysis output (currently blank but can include expressions or field mapping).  
   - Connect output of Analyze Video node to this node.  

9. **Add Sticky Notes for documentation:**  
   - Add sticky notes near relevant nodes with content:  
     - Workflow overview description  
     - Execution interval guidance (Schedule Trigger)  
     - Explanation of video download (Google Drive node)  
     - AI input preparation (Basic LLM Chain)  
     - File status validation (Check File Status)  
     - Video content analysis (Analyze Video)  
     - Output formatting (Set node)  
     - Assistance contact information with links.  

10. **Set node execution order accordingly:**  
    - Schedule Trigger → Download Video from Drive → Basic LLM Chain → Check File Status → Analyze Video → Format Analysis Result  

11. **Test the workflow:**  
    - Validate that the Google Drive file ID is correctly set and accessible.  
    - Confirm OAuth2 and API credentials are valid and not expired.  
    - Verify API endpoints accept requests and return expected responses.  
    - Monitor logs for errors such as authorization failures, timeouts, or malformed requests.  

---

### 5. General Notes & Resources

| Note Content                                                                                                       | Context or Link                                                   |
|--------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
| Workflow automates download, status check, and AI-based video analysis via Google Gemini API and Google Drive.    | Workflow description sticky note.                                |
| Support and contact: Yaron@nofluff.online.                                                                         | Sticky Note - Assistance node.                                   |
| Explore more tips and tutorials:                                                                                   | YouTube: https://www.youtube.com/@YaronBeen/videos               |
|                                                                                                                    | LinkedIn: https://www.linkedin.com/in/yaronbeen/                  |

---

**Disclaimer:** The text provided is exclusively derived from an automated n8n workflow. It complies fully with content policies and contains no illegal or protected material. All processed data is lawful and publicly accessible.