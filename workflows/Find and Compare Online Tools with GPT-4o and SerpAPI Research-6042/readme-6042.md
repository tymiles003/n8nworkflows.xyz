Find and Compare Online Tools with GPT-4o and SerpAPI Research

https://n8nworkflows.xyz/workflows/find-and-compare-online-tools-with-gpt-4o-and-serpapi-research-6042


# Find and Compare Online Tools with GPT-4o and SerpAPI Research

### 1. Workflow Overview

This workflow is designed to find and compare online tools or services for a user-specified task by leveraging AI-powered search and evaluation. It integrates GPT-4o language models with SerpAPI search capabilities to identify the top 5 online tools that can accomplish a given job, then reviews and analyzes these tools in detail to help users make informed decisions.

The workflow is logically divided into the following blocks:

- **1.1 Input Reception:** Captures user input via chat messages.
- **1.2 Tool Discovery:** Uses GPT-4o and SerpAPI to find the top 5 online tools for the user’s requested task.
- **1.3 Tool Listing Parser:** Structures the list of discovered tools for further processing.
- **1.4 Individual Tool Review Agents:** Five parallel agents each review one tool, gathering pricing, limitations, user reviews, pros, cons, and conclusions using GPT-4o and SerpAPI.
- **1.5 Aggregation and Compilation:** Merges all individual reviews, aggregates outputs, and compiles a clean, user-friendly comparison summary.

---

### 2. Block-by-Block Analysis

#### Block 1.1: Input Reception

- **Overview:**  
  Listens for incoming chat messages that specify the user's task or software/tool they want to find online options for.

- **Nodes Involved:**  
  - When chat message received

- **Node Details:**

  - **When chat message received**  
    - Type: Langchain Chat Trigger Node  
    - Role: Entry point webhook to start the workflow upon receiving a chat message.  
    - Configuration: Default parameters, listens for any chat input.  
    - Inputs: External chat input via webhook  
    - Outputs: Passes user chat input to next node.  
    - Failure modes: Network/webhook downtime, malformed chat input.

---

#### Block 1.2: Tool Discovery

- **Overview:**  
  Takes the user's input task and uses GPT-4o with SerpAPI to search for the top 5 tools/services that fulfill the task requirements.

- **Nodes Involved:**  
  - OpenAI Chat Model1  
  - Window Buffer Memory1  
  - SerpAPI1  
  - Structured Output Parser  
  - Tool Finder

- **Node Details:**

  - **OpenAI Chat Model1**  
    - Type: Langchain OpenAI Chat Model (GPT-4o)  
    - Role: Generate search queries and interpret results to find online tools.  
    - Config: Model set to "gpt-4o", no special options.  
    - Inputs: User chat input from trigger node.  
    - Outputs: Prompt to SerpAPI1 for searching.  
    - Credentials: OpenAI API key required.  
    - Failure modes: API quota limits, model downtime.

  - **Window Buffer Memory1**  
    - Type: Langchain Memory Buffer (Window)  
    - Role: Maintains conversation context for the AI model to improve relevance.  
    - Config: Default (no custom parameters).  
    - Inputs: Conversation history and new input.  
    - Outputs: Context augmented input to OpenAI Chat Model1.  
    - Failure modes: Memory overflow or context loss in long conversations.

  - **SerpAPI1**  
    - Type: Langchain SerpAPI Tool  
    - Role: Executes Google search queries generated by AI to find tool candidates.  
    - Config: Default SerpAPI options.  
    - Inputs: Search queries from OpenAI Chat Model1.  
    - Outputs: Search results to Tool Finder node.  
    - Credentials: SerpAPI key required.  
    - Failure modes: API key invalid, quota exceeded, network timeout.

  - **Structured Output Parser**  
    - Type: Langchain Structured Output Parser  
    - Role: Parses the AI-generated JSON-formatted list of 5 tools matching the user’s query.  
    - Config: JSON schema expects a "topic" and an array "ItemNames" with exactly 5 entries.  
    - Inputs: Raw AI output from Tool Finder.  
    - Outputs: Parsed list of tool names for downstream processing.  
    - Failure modes: Schema mismatch, malformed JSON output.

  - **Tool Finder**  
    - Type: Langchain Agent  
    - Role: Uses the AI model and SerpAPI to generate and validate the list of top 5 online tools for the user task.  
    - Config: System message instructs the agent to search for top 5 non-repetitive tools with highest ratings, incorporating the user prompt.  
    - Inputs: User chat input, search results from SerpAPI1, context from Window Buffer Memory1.  
    - Outputs: JSON list of 5 tool names with the task appended.  
    - Failure modes: Incomplete search results, repeated tools, failure to generate 5 distinct tools.

---

#### Block 1.3: Individual Tool Review Agents

- **Overview:**  
  Five parallel agents each review one of the tools found. They analyze price, usage limits, user reviews, pros, cons, and provide an overall conclusion by utilizing GPT-4o and SerpAPI Google Shopping search.

- **Nodes Involved:**  
  - Reviewer 1 (Langchain Agent)  
  - Reviewer 2 (Langchain Agent)  
  - Reviewer 3 (Langchain Agent)  
  - Reviewer 4 (Langchain Agent)  
  - Reviewer 5 (Langchain Agent)  
  - Each Reviewer node has a paired OpenAI Chat Model node (OpenAI Chat Model2 to OpenAI Chat Model6) and SerpAPI nodes (SerpAPI2 to SerpAPI5) as tools.

- **Node Details:**

  Each Reviewer node shares a similar structure:

  - **Reviewer N (N=1..5)**  
    - Type: Langchain Agent  
    - Role: Evaluate the assigned tool’s capabilities in detail.  
    - Configuration:  
      - System message instructs detailed evaluation including pricing, limits, reviews, pros/cons, and conclusion.  
      - Uses Google Shopping via SerpAPI for real-time data on price and reviews.  
      - Input text is the specific tool name combined with the user task.  
    - Inputs: Parsed tool name from Structured Output Parser (ItemNames[N-1])  
    - Outputs: Detailed review text for each tool.  
    - Failure modes: Missing or outdated pricing info, lack of reviews, API call failures, incomplete search results.

  - **OpenAI Chat Model2 to OpenAI Chat Model6**  
    - Type: Langchain OpenAI Chat Model (GPT-4o)  
    - Role: Provide language model processing for the respective Reviewer agent.  
    - Config: Model set to "gpt-4o" for reviewers 1-5.  
    - Inputs: Reviewer prompt text.  
    - Outputs: Detailed evaluation text.  
    - Credentials: OpenAI API key required.

  - **SerpAPI2 to SerpAPI5**  
    - Type: Langchain SerpAPI Tool  
    - Role: Provide search data for reviewers.  
    - Config: Default SerpAPI options.  
    - Inputs: Search queries crafted by reviewers.  
    - Outputs: Search results for price, reviews, etc.  
    - Credentials: SerpAPI API key required.

---

#### Block 1.4: Aggregation and Compilation

- **Overview:**  
  Collects all five individual tool reviews, merges them, aggregates outputs, and compiles a final, neatly formatted comparison summary.

- **Nodes Involved:**  
  - Merge1  
  - Aggregate1  
  - Compiler (Langchain Agent)  
  - OpenAI Chat Model (GPT-4o-mini)

- **Node Details:**

  - **Merge1**  
    - Type: n8n Merge Node  
    - Role: Combines the outputs from the five Reviewer nodes into a single stream.  
    - Config: Set to expect 5 inputs, one from each reviewer.  
    - Inputs: Outputs from Reviewer 1-5 nodes.  
    - Outputs: Merged array to Aggregate1.

  - **Aggregate1**  
    - Type: n8n Aggregate Node  
    - Role: Aggregates the merged reviews into a structured dataset with named fields "Output 1" to "Output 5".  
    - Config: Aggregates the raw outputs, renaming fields for clarity.  
    - Inputs: Merged reviewer outputs.  
    - Outputs: Aggregated data to Compiler node.

  - **Compiler**  
    - Type: Langchain Agent  
    - Role: Organizes and formats the aggregated review data into a clean, pamphlet-style comparison document.  
    - Config: System message instructs to keep original info intact, only reorganizing it for readability.  
    - Inputs: Aggregated outputs from Aggregate1.  
    - Outputs: Final compiled text for user consumption.

  - **OpenAI Chat Model (GPT-4o-mini)**  
    - Type: Langchain OpenAI Chat Model  
    - Role: Supports the Compiler agent with language processing.  
    - Config: Uses "gpt-4o-mini" model for efficient compilation.  
    - Inputs: Text from Compiler node.  
    - Outputs: Final formatted comparison text.

---

### 3. Summary Table

| Node Name               | Node Type                              | Functional Role                          | Input Node(s)                                                    | Output Node(s)                        | Sticky Note                                                                                               |
|-------------------------|--------------------------------------|----------------------------------------|-----------------------------------------------------------------|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| When chat message received | Langchain Chat Trigger               | Receive user chat input, start workflow| None (webhook)                                                  | Tool Finder                         | See sticky note for OpenAI and SerpAPI API key setup instructions and usage notes                         |
| OpenAI Chat Model1       | Langchain OpenAI Chat Model          | Generate search queries for tools      | When chat message received, Window Buffer Memory1               | SerpAPI1, Tool Finder               |                                                                                                          |
| Window Buffer Memory1    | Langchain Memory Buffer (Window)     | Maintain chat context                   | When chat message received                                      | OpenAI Chat Model1                  |                                                                                                          |
| SerpAPI1                 | Langchain SerpAPI Tool               | Google search for tool discovery       | OpenAI Chat Model1                                              | Tool Finder                        |                                                                                                          |
| Structured Output Parser | Langchain Structured Output Parser   | Parse JSON list of 5 tools              | Tool Finder                                                    | Reviewer 1-5 nodes                  |                                                                                                          |
| Tool Finder              | Langchain Agent                     | Find top 5 tools matching user task    | When chat message received, Window Buffer Memory1, SerpAPI1     | Reviewer 1-5                       |                                                                                                          |
| Reviewer 1               | Langchain Agent                     | Review first tool                      | Structured Output Parser (ItemNames[0]), OpenAI Chat Model2, SerpAPI2 | Merge1                            |                                                                                                          |
| Reviewer 2               | Langchain Agent                     | Review second tool                     | Structured Output Parser (ItemNames[1]), OpenAI Chat Model3, SerpAPI3 | Merge1                            |                                                                                                          |
| Reviewer 3               | Langchain Agent                     | Review third tool                      | Structured Output Parser (ItemNames[2]), OpenAI Chat Model4, SerpAPI4 | Merge1                            |                                                                                                          |
| Reviewer 4               | Langchain Agent                     | Review fourth tool                     | Structured Output Parser (ItemNames[3]), OpenAI Chat Model5, SerpAPI5 | Merge1                            |                                                                                                          |
| Reviewer 5               | Langchain Agent                     | Review fifth tool                      | Structured Output Parser (ItemNames[4]), OpenAI Chat Model6, SerpAPI5 | Merge1                            |                                                                                                          |
| OpenAI Chat Model2       | Langchain OpenAI Chat Model          | Provide language processing for Reviewer 1 | Reviewer 1                                                    | Reviewer 1                        |                                                                                                          |
| OpenAI Chat Model3       | Langchain OpenAI Chat Model          | Provide language processing for Reviewer 2 | Reviewer 2                                                    | Reviewer 2                        |                                                                                                          |
| OpenAI Chat Model4       | Langchain OpenAI Chat Model          | Provide language processing for Reviewer 3 | Reviewer 3                                                    | Reviewer 3                        |                                                                                                          |
| OpenAI Chat Model5       | Langchain OpenAI Chat Model          | Provide language processing for Reviewer 4 | Reviewer 4                                                    | Reviewer 4                        |                                                                                                          |
| OpenAI Chat Model6       | Langchain OpenAI Chat Model          | Provide language processing for Reviewer 5 | Reviewer 5                                                    | Reviewer 5                        |                                                                                                          |
| SerpAPI2                 | Langchain SerpAPI Tool               | Support Reviewer 1 with Google search  | Reviewer 1                                                     | Reviewer 1                        |                                                                                                          |
| SerpAPI3                 | Langchain SerpAPI Tool               | Support Reviewer 2 with Google search  | Reviewer 2                                                     | Reviewer 2                        |                                                                                                          |
| SerpAPI4                 | Langchain SerpAPI Tool               | Support Reviewer 3 with Google search  | Reviewer 3                                                     | Reviewer 3                        |                                                                                                          |
| SerpAPI5                 | Langchain SerpAPI Tool               | Support Reviewer 4 and Reviewer 5 with Google search | Reviewer 4, Reviewer 5                                      | Reviewer 4, Reviewer 5            |                                                                                                          |
| Merge1                   | n8n Merge Node                      | Combine outputs from all Reviewers      | Reviewer 1, Reviewer 2, Reviewer 3, Reviewer 4, Reviewer 5       | Aggregate1                        |                                                                                                          |
| Aggregate1               | n8n Aggregate Node                  | Aggregate merged reviews into structured dataset | Merge1                                                    | Compiler                         |                                                                                                          |
| Compiler                 | Langchain Agent                     | Compile and format final comparison output | Aggregate1                                                 | OpenAI Chat Model (GPT-4o-mini)   |                                                                                                          |
| OpenAI Chat Model        | Langchain OpenAI Chat Model          | Support Compiler with language processing | Compiler                                                   | Final Output                      |                                                                                                          |
| Sticky Note              | n8n Sticky Note                    | Setup instructions and usage tips       | None                                                          | None                             | See sticky note content below for API key creation and usage instructions, cost warnings, and tips.      |

---

### 4. Reproducing the Workflow from Scratch

1. **Create the Trigger Node:**
   - Add a **Langchain Chat Trigger** node named "When chat message received".
   - Configure it with default webhook settings to receive chat input.

2. **Add Memory Node:**
   - Add a **Langchain Memory Buffer (Window)** node named "Window Buffer Memory1".
   - Connect "When chat message received" output to this node input.

3. **Add Primary OpenAI Chat Model:**
   - Add a **Langchain OpenAI Chat Model** node named "OpenAI Chat Model1".
   - Set model to "gpt-4o".
   - Connect "Window Buffer Memory1" output to this node input.
   - Assign OpenAI API credentials (create in n8n credential manager with your OpenAI secret key).

4. **Add SerpAPI Search Node:**
   - Add a **Langchain SerpAPI Tool** node named "SerpAPI1".
   - Connect its input to "OpenAI Chat Model1" output.
   - Assign SerpAPI API credentials with your SerpAPI key.

5. **Add Tool Finder Agent:**
   - Add a **Langchain Agent** node named "Tool Finder".
   - Configure system message as in the workflow: instruct agent to find 5 distinct top tools for the user’s task, queried via SerpAPI.
   - Connect inputs from:
     - "When chat message received" (main)
     - "Window Buffer Memory1" (memory)
     - "SerpAPI1" (tool)
     - "OpenAI Chat Model1" (languageModel)
   - Set output parser as **Structured Output Parser** with JSON schema requiring 5 tool names.

6. **Add Structured Output Parser:**
   - Add **Langchain Structured Output Parser** node named "Structured Output Parser".
   - Configure with JSON schema expecting "topic" and "ItemNames" array of 5 strings.
   - Connect output of "Tool Finder" to this node.

7. **Add Five Reviewer Agents:**
   - For each of five tools (index 0 to 4):
     - Add a **Langchain Agent** node named "Reviewer 1" through "Reviewer 5".
     - Configure system message instructing detailed review of the tool with price, limits, pros/cons, using Google Shopping via SerpAPI.
     - Set input text to corresponding `ItemNames[N]`.
     - Connect input from "Structured Output Parser" output.
     - Connect each reviewer to their own:
       - **Langchain OpenAI Chat Model** node ("OpenAI Chat Model2" to "OpenAI Chat Model6") with model "gpt-4o".
       - A **Langchain SerpAPI Tool** node ("SerpAPI2" to "SerpAPI5"), sharing SerpAPI credentials.
   - Connect each Reviewer node output to the next Merge node.

8. **Merge Reviewer Outputs:**
   - Add an **n8n Merge** node named "Merge1".
   - Set mode to "Multiple Inputs" expecting 5 inputs.
   - Connect outputs from Reviewer 1 to Reviewer 5 nodes to this merge node.

9. **Aggregate Merged Reviews:**
   - Add an **n8n Aggregate** node named "Aggregate1".
   - Configure fields to aggregate "output" from each merged input, renaming them "Output 1" through "Output 5".
   - Connect output of "Merge1" to "Aggregate1".

10. **Compile Final Document:**
    - Add a **Langchain Agent** node named "Compiler".
    - Configure system message instructing to format the 5 outputs into a clean, pamphlet-style comparison without changing original info.
    - Connect input from "Aggregate1".
    - Add a **Langchain OpenAI Chat Model** node named "OpenAI Chat Model" (last node).
    - Set model to "gpt-4o-mini" for efficient compilation.
    - Connect "Compiler" output to this model node.

11. **Credentials Setup:**
    - Create OpenAI API credentials with your key, assign to all OpenAI Chat Model nodes.
    - Create SerpAPI credentials with your key, assign to all SerpAPI nodes.

12. **Testing:**
    - Use the chat webhook to send a prompt describing the desired task/tool.
    - Monitor logs and outputs on the "Compiler" node for final compiled results.

---

### 5. General Notes & Resources

| Note Content                                                                                                                                                                                                                                                                                                                                                                                              | Context or Link                                                                                      |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| Create OpenAI key: Sign up at [OpenAI API keys](https://platform.openai.com/api-keys). Copy your secret key and add it in n8n credentials for all OpenAI Chat Model nodes. Use GPT-4o and GPT-4o-mini models; costs approx. $0.06 per run. Add sufficient balance (recommend $5).                                                                                                                                  | Sticky Note in workflow, setup instructions                                                       |
| Create SerpAPI account at https://serpapi.com/users/sign_up. Copy your API key and add it to n8n credentials for all SerpAPI nodes. Workflow uses about 8-15 of free 100 monthly searches. To increase quota, create additional SerpAPI accounts with new keys.                                                                                                                                             | Sticky Note in workflow, setup instructions                                                       |
| Usage: Type the software/tool you want to find in the chat box to trigger the search and analysis. Final compiled comparison appears in the "Compiler" node's output. You can review past executions and copy results for offline use.                                                                                                                                                                      | Sticky Note in workflow, usage instructions                                                       |
| This workflow uses multiple parallel reviewers to independently analyze each tool, ensuring detailed multi-angle evaluation.                                                                                                                                                                                                                                                                            | Workflow design note                                                                             |
| The system messages for reviewer agents provide a detailed template for output, including pricing, limits, summary of reviews, pros, cons, and conclusion, ensuring uniformity of output for easy comparison.                                                                                                                                                                                               | Reviewer agent configuration details                                                           |

---

**Disclaimer:** This documentation is generated from an n8n workflow designed exclusively for legal and public data processing. It complies with content policies and contains no illegal or offensive content.